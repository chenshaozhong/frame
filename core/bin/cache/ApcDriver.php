<?phpnamespace core\bin\cache;/** * Effect: * FileName: RedisDriver.hhp.php * Created by PhpStorm * Author: Charon <chensz@adsit.cn> * Date: 2015/11/10 * Time: 11:50 */ class ApcDriver implements CacheInterface{     protected $redis = NULL;     protected $group = '';     protected $ver = 0;     public function __construct($config = array())     {         if( empty($config) )         {             $config['GROUP'] = '';         }         if(isset($config['GROUP']))         {             $this->group = $config['GROUP'];         }         $this->ver = intval( $this->get($this->group.'_ver') );     }     public function get($key)     {         $success = FALSE;         $data = apc_fetch($key, $success);         if ($success === TRUE)         {             return is_array($data)                 ? unserialize($data[0])                 : $data;         }         return FALSE;     }     /**      * 设置缓存      * @param string  $key    缓存名      * @param mixed   $value  缓存内容      * @param integer $expire 缓存时间      */     public function set($key, $value, $expire = 1800)     {         $raw = FALSE;         $ttl = (int) $expire;         return apc_store(             $key,             ($raw === TRUE ? $value : array(serialize($value), time(), $ttl)),             $ttl         );     }     /**      * 自增      * @param $key      * @param int $value      * @return mixed      */     public function inc($key, $value = 1)     {         return apc_inc($key, $value);     }     /**      * 递增缓存值      * @param  string  $key   缓存名      * @param  integer $value 递增数量      * @return boolean      */     public function des($key, $value = 1)     {         return apc_dec($key, $value);     }     /**      * 删除缓存      * @param  string $key 缓存名      * @return boolean      */     public function del($key)     {         return apc_delete($key);     }     /**      * 清空缓存      * @ return void      */     public function clear()     {         return apc_clear_cache('user');     } }